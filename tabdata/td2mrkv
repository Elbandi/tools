#!/usr/bin/env perl

=pod

=head1 NAME

td2mrkv - Transform tabular data into multi-record key-value (MRKV) format.

=head1 OPTIONS

=over 4

=item -s, --separator STR

String to separate field name from content.
Default is TAB (C<\t>).

=back

=head1 EXAMPLE

getent passwd | tr : "\t" | td-add-headers USER PW UID GID GECOS HOME SHELL | td-select +ALL -PW | td2mrkv

=cut

$OptSeparator = "\t";

do '/usr/lib/tool/perl5/tabdata/common.pl' or die "$@";


process_header(scalar <STDIN>);


while(my @Field = read_record(\*STDIN))
{
	for my $idx (0..$#Header)
	{
		printf "%s%s%s\n", $Header[$idx], $OptSeparator, $Field[$idx];
	}
	
	print $RS;
}
